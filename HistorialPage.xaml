<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="AppScanner.HistorialPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    BackgroundColor="#f4f6f9"
    Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="Auto,*">

        <!-- HEADER -->
        <Grid BackgroundColor="#1e1e2f" HeightRequest="60">

            <!-- BOTÓN BACK MÁS GRANDE -->
            <ImageButton
                    Source="back.png"
                    Clicked="OnBack"
                    BackgroundColor="Transparent"
                    WidthRequest="64"
                    HeightRequest="64"
                    Padding="12"
                    HorizontalOptions="Start"
                    VerticalOptions="Center" />

            <Label Text="Historial del Día"
                   TextColor="White"
                   FontAttributes="Bold"
                   FontSize="18"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"/>
        </Grid>

        <!-- LISTA -->
        <ScrollView Grid.Row="1">
            <CollectionView x:Name="HistorialList"
                            ItemsLayout="VerticalList"
                            Margin="15">

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame CornerRadius="12"
                               Padding="12"
                               Margin="0,6"
                               HasShadow="True"
                               BackgroundColor="{AppThemeBinding Light=White, Dark=#1f2937}">

                            <Grid ColumnDefinitions="*,Auto"
                                RowDefinitions="Auto,Auto">

                                <!-- NOMBRE -->
                                <Label Text="{Binding Nombre}"
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    FontAttributes="Bold"
                                    FontSize="16"
                                    TextColor="{AppThemeBinding Light=Black, Dark=#f9fafb}" />

                                <!-- PRECIO -->
                                <Label Text="{Binding Precio, StringFormat='${0:N2}'}"
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    FontAttributes="Bold"
                                    FontSize="16"
                                    TextColor="Green"
                                    HorizontalTextAlignment="End" />

                                <!-- HORA -->
                                <Label Text="{Binding Hora}"
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    TextColor="Gray"
                                    FontSize="12"
                                    HorizontalTextAlignment="End" />

                            </Grid>

                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

            </CollectionView>
        </ScrollView>

    </Grid>
</ContentPage>